<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Détails projet</title>
  <link rel="stylesheet" href="style/style.css" />
</head>
<body>
    <header>
        <nav class="navbar">
          <div class="nav-logo"> 
            <a href="index.html">Portfolio</a>
          </div>
          <div class="nav-toggle" id="navToggle">☰</div>
          <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Accueil</a></li>
            <li class="has-submenu">Services
                <ul class="submenu">
                  <li><a href="https://srcontact-ni.github.io/me.website/index.html#seo">Optimisation SEO</a></li>
                  <li><a href="https://srcontact-ni.github.io/me.website/index.html#content">Gestion de contenu web</a></li>
                  <li><a href="https://srcontact-ni.github.io/me.website/index.html#uxui">UX / UI Design</a></li>
                  <li><a href="https://srcontact-ni.github.io/me.website/index.html#creation">Création de sites et d’interfaces</a></li>
                  <li><a href="https://srcontact-ni.github.io/me.website/index.html#analyse">Analyse des parcours utilisateurs</a></li>
                </ul>
            </li>
                <li class="has-submenu">
                    <a href="https://srcontact-ni.github.io/me.website/realisations.html">Réalisations</a>
                    <ul class="submenu">
                      <li><a href="https://srcontact-ni.github.io/me.website/project.html?id=logishotels">Logis Hôtels</a></li>
                      <li><a href="https://srcontact-ni.github.io/me.website/project.html?id=etikashion">Etikashion</a></li>
                      <li><a href="https://srcontact-ni.github.io/me.website/project.html?id=maisonaudio">Maison Audio Center</a></li>
                    </ul>
                  </li> 
            <li><a href=" mesinfos.html">Mes Infos</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </nav>
      </header>

  <main class="project-detail">
    <div class="container">
      <div class="project-header">
        <h1 id="projectName">Nom du projet</h1>
        <p id="shortDesc" class="short-desc"></p>
        <p id="phraseAccroche" class="phrase-accroche"></p>
    </div>

    <div class="project-grid">
      <section class="project-main">
        <h2>À propos</h2>
        <p id="projectAbout"></p>
    <div id="projectAbout"></div>
    <div id="projectSitesGroupe" class="sites-groupe"></div>

        <h2>Mes missions</h2>
    <div id="projectMissions" 
      class="missions-list"></div>
        </section>

      <section class="project-tools">
      <h3>Outils utilisés</h3>
      <div id="projectOutils"
       class ="tools-list">
      </div>

      <h3>Langages de programmation</h3>
      <div id="projectLangages"
        class="tools-list">
      </div>
      </section>

        <aside class="project-card-static">
          <h3>Informations</h3>
          <div><strong>Secteur :</strong> <span id="projectSecteur"></span></div>
          <div><strong>Localisation :</strong> <span id="projectLocalisation"></span></div>
          <div><strong>Durée :</strong> <span id="projectDuree"></span></div>
          <div><strong>Client :</strong> <span id="projectClient"></span></div>
          <div id="projectLink"></div>
        </aside>
      </div>

      <section class="project-gallery">
        <h3>Galerie du projet</h3>
        <div id="galleryContainer"></div>
      </section>      

      <section>
        <h2>Autres réalisations</h2>
        <div id="relatedProjects" class="cards-container"></div>
      </section>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Sarobidy</p>
  </footer>

  <script src="script/main.js"></script>
  <script>
    // Lire l'ID dans l'URL
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');

    fetch('assets/projects.json')
      .then(r => r.json())
      .then(projects => {
        const project = projects.find(p => p.ID === id);
        if (!project) {
          document.querySelector('.container').innerHTML = '<p>Projet non trouvé.</p>';
          return;
        }

        // Remplir les champs
        document.getElementById('projectName').textContent = project.NomProjet;
        document.getElementById('shortDesc').textContent = project.ShortDesc;
        document.getElementById('phraseAccroche').textContent = project.PhraseAccroche;
        document.getElementById('projectAbout').textContent = project.AProposEntreprise || '';
        if (project.SitesGroupe) {
              const sitesContainer = document.getElementById('projectSitesGroupe');
              sitesContainer.innerHTML = project.SitesGroupe.map(site => `
                <a href="${site.lien}" target="_blank" title="${site.nom}">
                  <img src="${site.logo}" alt="${site.nom}">
                </a>
              `).join('');
            }
        document.getElementById('projectSecteur').textContent = project.Secteur || '';
        document.getElementById('projectLocalisation').textContent = project.Localisation || '';
        document.getElementById('projectDuree').textContent = project.Duree || '';
        document.getElementById('projectClient').textContent = project.NomProjet;
        if (project.LienExterne) {
          document.getElementById('projectLink').innerHTML = `<a href="${project.LienExterne}" target="_blank">Voir le projet</a>`;
        }

        // Missions (affiche en gros avec séparateurs fins)
        const missionsContainer = document.getElementById('projectMissions');
        missionsContainer.innerHTML = '';
        project.Missions.forEach(m => {
          const div = document.createElement('div');
          div.className = 'mission-item';
          div.textContent = m;
          missionsContainer.appendChild(div);
        });

        // Outils utilisés
        const outilsContainer = document.getElementById("projectOutils");
        if(project.Outils){
          outilsContainer.innerHTML = 
          project.Outils.map(tool => `
            <div class="tool-item">
              <img src="${tool.logo}" alt="${tool.nom}">
              <span>${tool.nom}</span>
            </div>
            `).join('');
        }

        const langagesContainer = document.getElementById("projectLangages");
        if(project.Outils){
          langagesContainer.innerHTML = 
          project.Langages.map(lang => `
            <div class="tool-item">
              <img src="${lang.logo}" alt="${lang.nom}">
              <span>${lang.nom}</span>
            </div>
            `).join('');
        }

          // --- AJOUT DE LA GALERIE ---
          if (project.gallery) {
            window.renderGallery(project);
          }

        // Related projects
        const related = document.getElementById('relatedProjects');
        projects.filter(p => p.ID !== id).forEach(p => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <a href="project.html?id=${encodeURIComponent(p.ID)}">
              <img src="${p.Image}" alt="${p.NomProjet}">
              <div class="card-content">
                <h3>${p.NomProjet}</h3>
                <p>${p.ShortDesc}</p>
              </div>
            </a>
          `;
          related.appendChild(card);
        });
      })
      .catch(err => {
        console.error("Erreur chargement projet :", err);
        document.querySelector('.container').innerHTML = '<p>Impossible de charger les données.</p>';
      });
  </script>
</body>
</html>
